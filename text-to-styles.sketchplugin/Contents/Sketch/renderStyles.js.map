{"version":3,"sources":["webpack://exports/webpack/bootstrap","webpack://exports/./src/generators.js","webpack://exports/./src/renderStyles.js","webpack://exports/external \"sketch/dom\""],"names":["convertSketchColourToRGBA","colour","red","Math","round","green","blue","alpha","extractStyles","context","convert","doc","document","pages","TypographyStyles","DocumentColours","textAlignments","forEach","page","index","String","name","layers","layer","alignment","textAlignment","push","class","MSTextLayer","textTransform","styleAttributes","styles","fontFamily","dom","fromNative","style","fontWeight","fontSize","lineHeight","fontStyle","paragraphSpacing","letterSpacing","characterSpacing","kerning","alignments","adjustments","firstEnabledFill","color","length","documentData","removePageAtIndex","DesignSystemTokens","colours","typography","generateTextStyles","json","typeStyles","item","Object","keys","map","align","split","textColor","Style","colorToString","checkMatch","baseStyle","newStyle","prop","value","JSON","stringify","generateJSONStyles","arrayFormat","refinedBreakpoints","currentStyle","adjustmentLength","checked","formattedTokens","key","designTokens","textStyles","RenderPage","addBlankPage","sketch","sharedTextStyles","previousFrame","sharedStyles","layerTextStyles","latestStyle","stylename","textLayer","Text","text","toString","parent","frame","x","y","ceil","height","sharedStyleId","objectID","showMessage"],"mappings":";;;;;;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;;;;;AClFA;;AAGA,SAASA,yBAAT,CAAmCC,MAAnC,EAA2C;AACvC,MAAMC,GAAG,GAAGC,IAAI,CAACC,KAAL,CAAWH,MAAM,CAACC,GAAP,KAAe,GAA1B,CAAZ;AACA,MAAMG,KAAK,GAAGF,IAAI,CAACC,KAAL,CAAWH,MAAM,CAACI,KAAP,KAAiB,GAA5B,CAAd;AACA,MAAMC,IAAI,GAAGH,IAAI,CAACC,KAAL,CAAWH,MAAM,CAACK,IAAP,KAAgB,GAA3B,CAAb;AACA,SAAO,UAAUJ,GAAV,GAAgB,GAAhB,GAAsBG,KAAtB,GAA8B,GAA9B,GAAoCC,IAApC,GAA2C,GAA3C,GAAiDL,MAAM,CAACM,KAAP,EAAjD,GAAkE,GAAzE;AACH;;AAEM,SAASC,aAAT,CAAuBC,OAAvB,EAA+BC,OAA/B,EAAwC;AAE3C,MAAMC,GAAG,GAAGF,OAAO,CAACG,QAApB;AACA,MAAMC,KAAK,GAAGF,GAAG,CAACE,KAAJ,EAAd;AAGA,MAAIC,gBAAgB,GAAG,EAAvB;AACA,MAAIC,eAAe,GAAG,EAAtB;AACA,MAAIC,cAAc,GAAG,EAArB;AAEAH,OAAK,CAACI,OAAN,CAAc,UAACC,IAAD,EAAMC,KAAN,EAAc;AAE1B;AACA,QAAGC,MAAM,CAACF,IAAI,CAACG,IAAL,EAAD,CAAN,KAAsB,YAAzB,EAAuC;AACrCH,UAAI,CAACI,MAAL,GAAcL,OAAd,CAAsB,UAAAM,KAAK,EAAE;AAC3B;AACA,YAAIC,SAAS,GAAG,MAAhB;AACA,YAAGD,KAAK,CAACE,aAAN,OAAwB,CAA3B,EAA8BD,SAAS,GAAG,MAAZ;AAC9B,YAAGD,KAAK,CAACE,aAAN,OAAwB,CAA3B,EAA8BD,SAAS,GAAG,QAAZ;AAC9B,YAAGD,KAAK,CAACE,aAAN,OAAwB,CAA3B,EAA8BD,SAAS,GAAG,OAAZ;AAC9BR,sBAAc,CAACU,IAAf,CAAoBF,SAApB;AACD,OAPD;AAQD,KAZyB,CAc1B;;;AACA,QAAGJ,MAAM,CAACF,IAAI,CAACG,IAAL,EAAD,CAAN,KAAsB,QAAzB,EAAmC;AACjC;AACAH,UAAI,CAACI,MAAL,GAAcL,OAAd,CAAsB,UAAAM,KAAK,EAAE;AAE3B,YAAGA,KAAK,CAACI,KAAN,OAAgBC,WAAnB,EAAgC;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA,cAAIC,aAAa,GAAG,MAApB;AAEA,cAAGT,MAAM,CAACG,KAAK,CAACO,eAAN,GAAwB,0CAAxB,CAAD,CAAN,KAA8E,GAAjF,EAAsFD,aAAa,GAAG,WAAhB,CAVxD,CAUqF;;AACnH,cAAGT,MAAM,CAACG,KAAK,CAACO,eAAN,GAAwB,0CAAxB,CAAD,CAAN,KAA8E,GAAjF,EAAsFD,aAAa,GAAG,WAAhB,CAXxD,CAa/B;AACA;AAEC;AACA;;AAEAf,0BAAgB,CAACY,IAAjB,CAAsB;AACpBL,gBAAI,EAAID,MAAM,CAACG,KAAK,CAACF,IAAN,EAAD,CADM;AAEpBU,kBAAM;AACJC,wBAAU,EAAGC,iDAAG,CAACC,UAAJ,CAAeX,KAAf,EAAsBY,KAAtB,CAA4BH,UADrC;AAEJI,wBAAU,EAAIH,iDAAG,CAACC,UAAJ,CAAeX,KAAf,EAAsBY,KAAtB,CAA4BC,UAFtC;AAGJC,sBAAQ,EAAGd,KAAK,CAACc,QAAN,MAAkB3B,OAAO,GAAG,IAAH,GAAS,EAAlC,CAHP;AAIJ4B,wBAAU,EAAGf,KAAK,CAACe,UAAN,MAAoB5B,OAAO,GAAG,IAAH,GAAS,EAApC,CAJT;AAKJ6B,uBAAS,EAAI,QALT;AAKmB;AACvBC,8BAAgB,EAAGP,iDAAG,CAACC,UAAJ,CAAeX,KAAf,EAAsBY,KAAtB,CAA4BK;AAN3C,eAOD9B,OAAO,IAAI;AAAE+B,2BAAa,EAAErB,MAAM,CAAGG,KAAK,CAACmB,gBAAN,KAAyB,EAA1B,GAAgC,IAAlC;AAAvB,aAPV,EAQD,CAAChC,OAAD,IAAY;AAAEiC,qBAAO,EAAEpB,KAAK,CAACmB,gBAAN;AAAX,aARX;AASJb,2BAAa,EAAGA;AATZ,cAFc;AAapBe,sBAAU,EAAG5B,cAbO;AAcpB6B,uBAAW,EAAG;AAdM,WAAtB;AAgBD;AACF,OAtCD;AAuCD,KAxDyB,CA0D1B;;;AACA,QAAGzB,MAAM,CAACF,IAAI,CAACG,IAAL,EAAD,CAAN,KAAsB,SAAtB,IAAmCD,MAAM,CAACF,IAAI,CAACG,IAAL,EAAD,CAAN,KAAsB,QAA5D,EAAsE;AACpEN,qBAAe,GAAG,EAAlB;AACAG,UAAI,CAACI,MAAL,GAAcL,OAAd,CAAsB,UAAAM,KAAK,EAAE;AAC3BR,uBAAe,CAACQ,KAAK,CAACF,IAAN,EAAD,CAAf,GAAiCX,OAAO,GAAGV,yBAAyB,CAACuB,KAAK,CAACY,KAAN,GAAcW,gBAAd,GAAiCC,KAAjC,EAAD,CAA5B,GAAyExB,KAAK,CAACY,KAAN,GAAcW,gBAAd,GAAiCC,KAAjC,EAAjH;AACD,OAFD;AAGD;AACF,GAjED,EAV2C,CA4E3C;;AACA,OAAK,IAAI5B,KAAK,GAAGN,KAAK,CAACmC,MAAN,GAAe,CAAhC,EAAmC7B,KAAK,IAAI,CAA5C,EAA+CA,KAAK,IAAI,CAAxD,EAA2D;AACzD,QAAIN,KAAK,CAACmC,MAAN,GAAe,CAAnB,EAAsB;AACjB5B,YAAM,CAACP,KAAK,CAACM,KAAD,CAAL,CAAaE,IAAb,EAAD,CAAN,KAA+B,iBAAjC,IAAuDV,GAAG,CAACsC,YAAJ,GAAmBC,iBAAnB,CAAqC/B,KAArC,CAAvD;AACF;AACF;;AAED,MAAMgC,kBAAkB,GAAG;AACvBC,WAAO,EAAErC,eADc;AAEvBsC,cAAU,EAAGvC,gBAFU;AAGvBE,kBAAc,EAAGA;AAHM,GAA3B;AAMA,SAAQmC,kBAAR;AACH;AAIM,SAASG,kBAAT,CAA4BC,IAA5B,EAAiC;AAEpC,MAAIC,UAAU,GAAC,EAAf;AAEAD,MAAI,CAACF,UAAL,CAAgBpC,OAAhB,CAAwB,UAAAwC,IAAI,EAAE;AAC5BC,UAAM,CAACC,IAAP,CAAYJ,IAAI,CAACH,OAAjB,EAA0BnC,OAA1B,CAAkC,UAAAhB,MAAM,EAAE;AACxCwD,UAAI,CAACb,UAAL,CAAgBgB,GAAhB,CAAoB,UAACC,KAAD,EAAO1C,KAAP,EAAgB;AAClC;AACA;AACA,YAAIE,IAAI,GAAGoC,IAAI,CAACpC,IAAL,CAAUyC,KAAV,CAAgB,GAAhB,CAAX;AACAN,kBAAU,WAAInC,IAAI,CAAC,CAAD,CAAR,cAAepB,MAAf,cAAyBkB,KAAK,GAAC,GAAN,GAAU0C,KAAV,IAAmBxC,IAAI,CAAC2B,MAAL,GAAY,CAAZ,GAAiB,MAAM3B,IAAI,CAAC,CAAD,CAA3B,GAAiC,EAApD,CAAzB,EAAV;AAAkG0C,mBAAS,EAAE9B,iDAAG,CAAC+B,KAAJ,CAAUC,aAAV,CAAwBV,IAAI,CAACH,OAAL,CAAanD,MAAb,CAAxB,CAA7G;AAA4JuB,mBAAS,EAAEqC;AAAvK,WAAiLJ,IAAI,CAAC1B,MAAtL;AACD,OALD;AAMD,KAPD;AAQD,GATD;AAWA,SAAOyB,UAAP;AACH;;AAED,SAASU,UAAT,CAAoBC,SAApB,EAAgCC,QAAhC,EAA0CC,IAA1C,EAAgD;AAC5C,MAAIC,KAAK,GAAG,IAAZ,CAD4C,CAG5C;AACA;;AACA,MAAIC,IAAI,CAACC,SAAL,CAAeL,SAAS,CAACE,IAAD,CAAxB,MAAoCE,IAAI,CAACC,SAAL,CAAeJ,QAAQ,CAACC,IAAD,CAAvB,CAAxC,EAAwE;AAAE;AACtEC,SAAK,GAAI,KAAT;AACH,GAP2C,CAU5C;;;AAGA,SAAOA,KAAP;AACH;;AAEM,SAASG,kBAAT,CAA4BlB,IAA5B,EAAiCmB,WAAjC,EAA6C;AAEhD,MAAIlB,UAAU,GAAC,EAAf;AACA,MAAImB,kBAAkB,GAAG,EAAzB,CAHgD,CAIhD;;AACApB,MAAI,CAACF,UAAL,CAAgBpC,OAAhB,CAAwB,UAACwC,IAAD,EAAQ;AAC5B,QAAIpC,IAAI,GAAGoC,IAAI,CAACpC,IAAL,CAAUyC,KAAV,CAAgB,GAAhB,CAAX;;AACA,QAAG,CAACN,UAAU,CAACnC,IAAI,CAAC,CAAD,CAAL,CAAd,EAAyB;AAErBmC,gBAAU,CAACnC,IAAI,CAAC,CAAD,CAAL,CAAV,GAAsB;AAClBA,YAAI,EAAGA,IAAI,CAAC,CAAD,CADO;AAElBU,cAAM,EAAG0B,IAAI,CAAC1B,MAFI;AAGlBa,kBAAU,EAAGa,IAAI,CAACb,UAHA;AAIlBC,mBAAW,EAAG;AAJI,OAAtB;AAOH,KATD,MASO;AAEH,UAAI+B,YAAY,GAAGnB,IAAI,CAAC1B,MAAxB,CAFG,CAGH;AACA;;AACA,UAAM8C,gBAAgB,GAAGrB,UAAU,CAACnC,IAAI,CAAC,CAAD,CAAL,CAAV,CAAoBwB,WAApB,CAAgCG,MAAzD;AACA2B,wBAAkB,CAACE,gBAAD,CAAlB,GAAuC;AAAExD,YAAI,EAAGA,IAAI,CAAC,CAAD,CAAb;AAAkBU,cAAM,EAAC,EAAzB,CAEvC;AACA;AACA;AAEA;;AANuC,OAAvC;AAOA2B,YAAM,CAACC,IAAP,CAAYiB,YAAZ,EAA0BhB,GAA1B,CAA8B,UAAAkB,OAAO,EAAI;AACrC,YAAGZ,UAAU,CACXV,UAAU,CAACnC,IAAI,CAAC,CAAD,CAAL,CAAV,CAAoBU,MADT,EAEX6C,YAFW,EAGXE,OAHW,CAAb,EAII;AACFH,4BAAkB,CAACE,gBAAD,CAAlB,CAAqC9C,MAArC,CAA4C+C,OAA5C,IAAuDF,YAAY,CAACE,OAAD,CAAnE;AACD;AACF,OARH;AAUAtB,gBAAU,CAACnC,IAAI,CAAC,CAAD,CAAL,CAAV,CAAoBwB,WAApB,CAAgCnB,IAAhC,CAAqCiD,kBAAkB,CAACE,gBAAD,CAAvD;AACH;AACJ,GApCD,EALgD,CA2ChD;;AACA,MAAIE,eAAe,GAAG;AAClB3B,WAAO,EAAEG,IAAI,CAACH,OADI;AAElBC,cAAU,EAAIqB,WAAW,GAAGhB,MAAM,CAACC,IAAP,CAAYH,UAAZ,EAAwBI,GAAxB,CAA4B,UAASoB,GAAT,EAAc;AAClE,aAAOxB,UAAU,CAACwB,GAAD,CAAjB;AACD,KAFyB,CAAH,GAElBxB;AAJW,GAAtB;AAMA,SAAOuB,eAAP;AACH,C;;;;;;;;;;;;AC7LD;AAAA;AAAA;AAAA;AAAA;AACA;AAGe,yEAAStE,OAAT,EAAkB;AAG/B,MAAMwE,YAAY,GAAGzE,iEAAa,CAACC,OAAD,EAAS,KAAT,CAAlC;AACA,MAAMyE,UAAU,GAAG5B,sEAAkB,CAAC2B,YAAD,CAArC,CAJ+B,CAM/B;;AAEA,MAAIE,UAAU,GAAI1E,OAAO,CAACG,QAAR,CAAiBwE,YAAjB,EAAlB;AACAD,YAAU,CAAC9D,IAAX,GAAgB,iBAAhB;AAEA,MAAIT,QAAQ,GAAGyE,iDAAM,CAACnD,UAAP,CAAkBzB,OAAO,CAACG,QAA1B,CAAf,CAX+B,CAa/B;;AACAA,UAAQ,CAAC0E,gBAAT,GAA4B,EAA5B;AAGA,MAAIC,aAAa,GAAG,IAApB;AACA7B,QAAM,CAACC,IAAP,CAAYuB,UAAZ,EAAwBjE,OAAxB,CAAgC,UAAAkB,KAAK,EAAE;AAEnCvB,YAAQ,CAAC0E,gBAAT,CAA0B5D,IAA1B,CAA+B;AAC7BL,UAAI,EAAED,MAAM,CAACe,KAAD,CADiB;AAE7BA,WAAK,EAAE+C,UAAU,CAAC/C,KAAD;AAFY,KAA/B,EAFmC,CAOnC;;AACD,QAAIqD,YAAY,GAAG/E,OAAO,CAACG,QAAR,CAAiBqC,YAAjB,GAAgCwC,eAAhC,GAAkDD,YAAlD,EAAnB;AACA,QAAIE,WAAW,GAAGF,YAAY,CAACA,YAAY,CAACxC,MAAb,GAAoB,CAArB,CAA9B;AAEC,QAAI2C,SAAS,GAAGvE,MAAM,CAACe,KAAD,CAAtB;AACA,QAAIyD,SAAS,GAAG,IAAIC,+CAAJ,CAAS;AACvBC,UAAI,EAAE3D,KAAK,CAAC4D,QAAN,EADiB;AAEvBC,YAAM,EAAGb,UAFc;AAGvBhD,WAAK,EAAE+C,UAAU,CAAC/C,KAAD,CAHM;AAIvB8D,WAAK,EAAG;AAAEC,SAAC,EAAG,CAAN;AAAUC,SAAC,EAAKZ,aAAa,IAAK,IAAlB,GAAyBpF,IAAI,CAACiG,IAAL,CAAUb,aAAa,CAACU,KAAd,CAAoBI,MAApB,GAA6Bd,aAAa,CAACU,KAAd,CAAoBE,CAAjD,GAAqD,EAA/D,CAAzB,GAA8F;AAA9G,OAJe;AAKvBG,mBAAa,EAAEZ,WAAW,CAACa,QAAZ;AALQ,KAAT,CAAhB;AAQAX,aAAS,CAACvE,IAAV,GAAiBsE,SAAjB;AACAJ,iBAAa,GAAGK,SAAhB;AACH,GAtBD,EAlB+B,CA0C/B;;AACAnF,SAAO,CAACG,QAAR,CAAiB4F,WAAjB,WAAgC9C,MAAM,CAACC,IAAP,CAAYuB,UAAZ,EAAwBlC,MAAxD,4BAAgFU,MAAM,CAACC,IAAP,CAAYsB,YAAY,CAAC5B,UAAzB,EAAqCL,MAArH,4BAA6IU,MAAM,CAACC,IAAP,CAAYsB,YAAY,CAAC7B,OAAzB,EAAkCJ,MAA/K,wBAAmMU,MAAM,CAACC,IAAP,CAAYsB,YAAY,CAACjE,cAAzB,EAAyCgC,MAA5O;AAED,C;;;;;;;;;;;ACjDD,uC","file":"renderStyles.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/renderStyles.js\");\n","import dom from 'sketch/dom'\n\n\nfunction convertSketchColourToRGBA(colour) {\n    const red = Math.round(colour.red() * 255);\n    const green = Math.round(colour.green() * 255);\n    const blue = Math.round(colour.blue() * 255);\n    return 'rgba(' + red + ',' + green + ',' + blue + ',' + colour.alpha() + ')';\n}\n\nexport function extractStyles(context,convert) {\n      \n    const doc = context.document;\n    const pages = doc.pages()\n    \n  \n    let TypographyStyles = []\n    let DocumentColours = {};\n    let textAlignments = [];\n  \n    pages.forEach((page,index)=>{\n     \n      //  alignments\n      if(String(page.name())===\"Alignments\") {\n        page.layers().forEach(layer=>{ \n          //log(layer.name() + ' ' + layer.textAlignment()) \n          let alignment = 'left';\n          if(layer.textAlignment()===4) alignment = 'left';\n          if(layer.textAlignment()===2) alignment = 'center';\n          if(layer.textAlignment()===1) alignment = 'right';\n          textAlignments.push(alignment);\n        });\n      }\n  \n      // page styles\n      if(String(page.name())===\"Styles\") {\n        // get styles\n        page.layers().forEach(layer=>{\n         \n          if(layer.class()===MSTextLayer) {\n            \n            // log(layer.font().fontName())\n            // log(layer.fontSize())\n            // log(layer.lineHeight())\n            // log(layer.characterSpacing())\n            // log(layer.style().textStyle().encodedAttributes() )\n            //log(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])\n            let textTransform = 'none';\n           \n            if(String(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])==='1') textTransform = 'uppercase'; //  null: none, 1: uppercase and 2 lowercase\n            if(String(layer.styleAttributes()[\"MSAttributedStringTextTransformAttribute\"])==='2') textTransform = 'lowercase'; \n\n           // console.log( String(layer.name()) +  \" \" +  layer.font().fontName() + \" \"  + dom.fromNative(layer).style.fontWeight + \" \" +  dom.fromNative(layer).style.fontStyle  )\n           // console.log(\"-----\" )\n\n            // fontFamily : dom.fromNative(layer).style.fontFamily ,  \n            // fontWeight : dom.fromNative(layer).style.fontWeight ,\n\n            TypographyStyles.push({\n              name  : String(layer.name()),\n              styles : {\n                fontFamily : dom.fromNative(layer).style.fontFamily,     \n                fontWeight :  dom.fromNative(layer).style.fontWeight ,\n                fontSize : layer.fontSize()+(convert ? 'px' :''),\n                lineHeight : layer.lineHeight()+(convert ? 'px' :''),\n                fontStyle :  \"normal\" ,//dom.fromNative(layer).style.fontStyle   ,\n                paragraphSpacing : dom.fromNative(layer).style.paragraphSpacing,\n                ...convert && { letterSpacing: String( (layer.characterSpacing()/10)  +'em') },\n                ...!convert && { kerning: layer.characterSpacing()  },\n                textTransform : textTransform \n              },\n              alignments : textAlignments,\n              adjustments : []\n            })\n          }\n        });\n      }\n  \n      // get colours\n      if(String(page.name())===\"Colours\" || String(page.name())===\"Colors\") {\n        DocumentColours = {};\n        page.layers().forEach(layer=>{ \n          DocumentColours[layer.name()] = (convert ? convertSketchColourToRGBA(layer.style().firstEnabledFill().color()) : layer.style().firstEnabledFill().color())\n        })\n      }\n    });\n    // Remove previous rendered pages (thanks to react-sketchapp)\n    for (let index = pages.length - 1; index >= 0; index -= 1) {\n      if (pages.length > 1) {\n         ( String(pages[index].name()) ==='Rendered Styles') && doc.documentData().removePageAtIndex(index);\n      }\n    }\n\n    const DesignSystemTokens = {\n        colours: DocumentColours,\n        typography : TypographyStyles,\n        textAlignments : textAlignments\n    }\n\n    return  DesignSystemTokens;\n}\n\n\n\nexport function generateTextStyles(json){\n  \n    let typeStyles={};\n  \n    json.typography.forEach(item=>{\n      Object.keys(json.colours).forEach(colour=>{ \n        item.alignments.map((align,index)=> {\n          // this splits at a slash and adds the adjustments for breakpoints after the alignment\n          // assumption is that there is only one adjusment\n          let name = item.name.split('/');\n          typeStyles[`${name[0]}/${colour}/${index+'_'+align + (name.length>1  ? '/' + name[1] : '')}` ] = {textColor: dom.Style.colorToString(json.colours[colour]), alignment: align, ...item.styles }\n        })\n      })\n    })\n  \n    return typeStyles;\n}\n\nfunction checkMatch(baseStyle,  newStyle, prop) {\n    let value = true;\n  \n    // for now we are just going off the previous style. As this would need to check \n    // every prop across every adjustment :/\n    if (JSON.stringify(baseStyle[prop]) === JSON.stringify(newStyle[prop])) { // very primitive and breaks if order is out of sync \n        value =  false       \n    } \n\n    \n    //log( prop + ' ' + baseStyle[prop] + ' ----- ' + prop  + ' ' +newStyle[prop] + '  value ' + value)\n   \n\n    return value;\n}\n\nexport function generateJSONStyles(json,arrayFormat){\n  \n    let typeStyles={};\n    let refinedBreakpoints = []\n    //log(json.typography)\n    json.typography.forEach((item)=>{\n        let name = item.name.split('/');\n        if(!typeStyles[name[0]]) {\n             \n            typeStyles[name[0]] = {\n                name : name[0],\n                styles : item.styles,\n                alignments : item.alignments,\n                adjustments : []\n            }\n\n        } else {\n            \n            let currentStyle = item.styles\n            //let previousStyle = typeStyles[name[0]].styles\n            // work out previous style\n            const adjustmentLength = typeStyles[name[0]].adjustments.length;\n            refinedBreakpoints[adjustmentLength] = { name : name[1], styles:{}}\n            \n            // if(adjustmentLength>0){\n            //     previousStyle = typeStyles[name[0]].adjustments[adjustmentLength-1]\n            // } \n            \n            //previousStyle,\n            Object.keys(currentStyle).map(checked => {\n                if(checkMatch(\n                  typeStyles[name[0]].styles,\n                  currentStyle,\n                  checked\n                ) ) {\n                  refinedBreakpoints[adjustmentLength].styles[checked] = currentStyle[checked];\n                }\n              });\n\n            typeStyles[name[0]].adjustments.push(refinedBreakpoints[adjustmentLength])\n        }\n    })\n\n    // finally merge colours back in and return text to an array\n    let formattedTokens = {\n        colours: json.colours,\n        typography : (arrayFormat ? Object.keys(typeStyles).map(function(key) {\n            return typeStyles[key];\n          }) : typeStyles) \n    }\n    return formattedTokens;\n}","import  sketch, {Text} from 'sketch/dom'\nimport {extractStyles,generateTextStyles} from './generators'\n\n\nexport default function(context) {\n\n\n  const designTokens = extractStyles(context,false)\n  const textStyles = generateTextStyles(designTokens);\n\n  //console.log(textStyles)\n\n  let RenderPage =  context.document.addBlankPage();\n  RenderPage.name=\"Rendered Styles\";\n\n  let document = sketch.fromNative(context.document);\n\n  // reset styles\n  document.sharedTextStyles = [];\n\n\n  let previousFrame = null;\n  Object.keys(textStyles).forEach(style=>{\n    \n      document.sharedTextStyles.push({\n        name: String(style),\n        style: textStyles[style]\n      });\n\n      // attach the style to the render\n     let sharedStyles = context.document.documentData().layerTextStyles().sharedStyles();\n     let latestStyle = sharedStyles[sharedStyles.length-1];\n\n      let stylename = String(style);\n      let textLayer = new Text({ \n        text: style.toString(),\n        parent : RenderPage,\n        style: textStyles[style],\n        frame : { x : 0 , y :  (previousFrame   !=null ? Math.ceil(previousFrame.frame.height + previousFrame.frame.y + 24) : 0)},\n        sharedStyleId: latestStyle.objectID()\n      });\n\n      textLayer.name = stylename;\n      previousFrame = textLayer;\n  })\n\n  // success message\n  context.document.showMessage(`${Object.keys(textStyles).length} styles added (${Object.keys(designTokens.typography).length} Text Styles * ${Object.keys(designTokens.colours).length} colours * ${Object.keys(designTokens.textAlignments).length} alignments) 🙌`);\n\n}\n","module.exports = require(\"sketch/dom\");"],"sourceRoot":""}